<nav
  class="sidebar bg-gray-800 dark:bg-gray-900 h-full flex flex-col transition"
  [ngStyle]="{
    width: '64px'
  }"
>
  @if ((playerGameView$ | async)?.GameCode; as gameCode) {
    <div class="flex flex-col justify-around text-center my-2">
      <div class="text-gray-200 semibold text-center text-xs">Game Code:</div>
      <div
        class="text-gray-200 tracking-widest font-bold text-center text-md mt-1"
      >
        {{ gameCode }}
      </div>
    </div>
  }

  <div class="divider mx-2"></div>

  <div>
    <app-sidebar-item
      data-testid="pass-move-button"
      [disabled]="!!(waitingForServer$ | async)"
      [itemHeight]="64"
      [itemWidth]="64"
      [iconSize]="32"
      tooltip="Pass move"
      materialSymbol="waving_hand"
      (selected)="attemptToOpenPassMoveModal()"
    ></app-sidebar-item>
    <app-sidebar-item
      [disabled]="!!(waitingForServer$ | async)"
      [itemHeight]="64"
      [itemWidth]="64"
      [iconSize]="32"
      tooltip="Offer draw"
      materialSymbol="handshake"
      (selected)="attemptToOpenOfferDrawModel()"
    ></app-sidebar-item>
    <app-sidebar-item
      [disabled]="!!(waitingForServer$ | async)"
      [itemHeight]="64"
      [itemWidth]="64"
      [iconSize]="32"
      tooltip="Resign"
      materialSymbol="flag"
      (selected)="openResignModal()"
    ></app-sidebar-item>
    <app-sidebar-item
      class="flex dark:hidden"
      [disabled]="!!(waitingForServer$ | async)"
      [itemHeight]="64"
      [itemWidth]="64"
      [iconSize]="32"
      tooltip="Dark Mode"
      materialSymbol="dark_mode"
      (selected)="toggleDarkMode()"
    ></app-sidebar-item>
    <app-sidebar-item
      class="hidden dark:flex"
      [disabled]="!!(waitingForServer$ | async)"
      [itemHeight]="64"
      [itemWidth]="64"
      [iconSize]="32"
      tooltip="Light Mode"
      materialSymbol="light_mode"
      (selected)="toggleDarkMode()"
    ></app-sidebar-item>
    <!-- TODO: Build report bug -->
    <!-- <app-sidebar-item
      [disabled]="true"
      [itemHeight]="64"
      [itemWidth]="64"
      [iconSize]="32"
      tooltip="Report Bug"
      materialSymbol="bug_report"
      (selected)="reportBug()"
    ></app-sidebar-item> -->
  </div>

  @if (numCardsInOpponentDeck !== null && numCardsInPlayerDeck !== null) {
    <div class="divider mx-2"></div>
  }
  @if (numCardsInOpponentDeck !== null && numCardsInPlayerDeck !== null) {
    <div class="game-stats">
      <div
        class="remaining-time"
        [ngClass]="{
          'is-not-counting-down': isPlayersTurn
        }"
      >
        <span>
          {{ opponentsRemainingSecondsString }}
        </span>
      </div>
      <div class="deck-counts">
        <div class="deck-count">{{ numCardsInOpponentDeck }}</div>
        <game-face-down-card></game-face-down-card>
        <game-face-down-card></game-face-down-card>
        <div class="deck-count">{{ numCardsInPlayerDeck }}</div>
      </div>
      <div
        class="remaining-time"
        [ngClass]="{
          'low-time-container': playerHasLowTime,
          'is-not-counting-down': !isPlayersTurn
        }"
      >
        <span>{{ playersRemainingSecondsString }}</span>
      </div>
    </div>
  }
</nav>
