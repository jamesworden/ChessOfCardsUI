<div
  *ngIf="playerGameView$ | async as playerGameView"
  class="board"
  [ngStyle]="{
    padding: (cardSize$ | async)! / 3 + 'px 0px'
  }"
>
  <ng-container
    [ngTemplateOutlet]="placeMultipleCardsOverlay"
    *ngIf="initialPlaceMultipleCardAttempt"
  ></ng-container>

  <div
    class="lanes"
    [ngClass]="{ 'reverse-lanes-horisontally': !playerGameView.IsHost }"
  >
    <ng-container
      *ngFor="let lane of playerGameView.Lanes; let laneIndex = index"
    >
      <ng-container
        *ngIf="
          initialPlaceMultipleCardAttempt?.TargetLaneIndex === laneIndex;
          else regularLane
        "
        ><app-place-multiple-cards-lane></app-place-multiple-cards-lane
      ></ng-container>

      <ng-template #regularLane>
        <app-lane
          [lane]="lane"
          [laneIndex]="laneIndex"
          [isHost]="playerGameView.IsHost"
          [redJokerLaneIndex]="playerGameView.RedJokerLaneIndex"
          [blackJokerLaneIndex]="playerGameView.BlackJokerLaneIndex"
          [transparentTiles]="transparentTiles"
          (placeCardAttempted)="onPlaceCardAttempted($event)"
        ></app-lane>
      </ng-template>
    </ng-container>
  </div>
</div>

<ng-template #placeMultipleCardsOverlay>
  <div
    [ngStyle]="{
      position: 'absolute',
      'z-index': Z_INDEXES.PLACE_MULTIPLE_CARDS_OVERLAY,
      'background-color': 'black',
      opacity: 0.8,
      height: (cardSize$ | async)! * 7 + 'px',
      width: (cardSize$ | async)! * 5 + 'px',
      'border-radius': '4px',
      overflow: 'hidden'
    }"
  ></div>
</ng-template>
