<ng-container
  *ngIf="
    initialPlaceMultipleCardAttempt$ | async as initialPlaceMultipleCardAttempt
  "
>
  <div class="lane" *ngIf="playerGameView$ | async">
    <!-- Lane background color layer beneath place cards -->
    <div
      [ngStyle]="{
        position: 'absolute',
        width: '64px',
        'z-index': Z_INDEXES.PLACE_MULTIPLE_CARDS_LANE_BACKGROUND
      }"
    >
      <div
        *ngFor="let position of pseudoPositions"
        [ngStyle]="{
          height: (cardSize$ | async)! + 'px',
          width: (cardSize$ | async)! + 'px',
          'background-color': position.backgroundColor
        }"
      ></div>
    </div>

    <div
      id="place-multiple-cards-list"
      class="place-multiple-cards-list"
      cdkDropList
      cdkDropListData="place-multiple-cards-list"
      cdkDropListConnectedTo="player-hand"
      cdkDropListOrientation="vertical"
      (cdkDropListDropped)="onCardPlaced($event)"
      [cdkDropListEnterPredicate]="
        getEnterPredicate(initialPlaceMultipleCardAttempt)
      "
      [ngStyle]="{
        'z-index': Z_INDEXES.PLACE_MULTIPLE_CARDS,
        'min-height': MIN_CARD_HEIGHT_FACTOR * (cardSize$ | async)! + 'px',
        width: (cardSize$ | async)! + 'px'
      }"
    >
      <app-card
        *ngFor="let card of placeMultipleCards$ | async"
        [card]="card"
        [playerCanDrag]="true"
        [reduceHeight]="true"
        [laneIndex]="initialPlaceMultipleCardAttempt.TargetLaneIndex"
      ></app-card>
    </div>

    <div
      class="existing-cards"
      [ngStyle]="{
        'z-index': Z_INDEXES.PLACE_MULTIPLE_CARDS
      }"
    >
      <div
        class="existing-card-position"
        *ngFor="let card of previouslyCapturedCards$ | async"
      >
        <app-card
          [card]="card"
          [reduceHeight]="true"
          [playerCanDrag]="false"
          [laneIndex]="initialPlaceMultipleCardAttempt.TargetLaneIndex"
        ></app-card>
      </div>
    </div>
  </div>
</ng-container>
