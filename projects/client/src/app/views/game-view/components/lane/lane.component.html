<div
  *ngIf="lane$ | async as lane"
  class="lane"
  [ngClass]="{ 'reverse-rows-vertically': !isHost }"
>
  @for(position of (positions$ | async); track i; let i = $index) {
  <app-position
    [transparentTile]="transparentTiles"
    [laneIndex]="laneIndex"
    [rowIndex]="position.rowIndex"
    [backgroundColor]="position.backgroundColor"
    (placeCardAttempted)="onPlaceCardAttempted($event)"
  >
    <app-card
      *ngIf="position.topCard"
      [ngStyle]="{
        rotate: position.cardRotation + 'deg'
      }"
      [card]="position.topCard"
    ></app-card>

    <ng-container *ngIf="position.rowIndex === 3">
      <app-joker-card
        *ngIf="redJokerLaneIndex === laneIndex"
        [isRedJoker]="true"
      ></app-joker-card>

      <app-joker-card
        *ngIf="blackJokerLaneIndex === laneIndex"
        [isRedJoker]="false"
      ></app-joker-card>
    </ng-container>
  </app-position>
  }
</div>
