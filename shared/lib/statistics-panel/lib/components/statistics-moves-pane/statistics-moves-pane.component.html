<div class="h-full flex flex-col justify-between mb-2">
  @if (moveNotations.length > 0) {
    <div class="flex flex-col">
      @for (moveNotation of moveNotations; track i; let i = $index) {
        <div
          (click)="selectMoveNotation(i)"
          class="flex gap-x-2 px-2 py-4 transition bg-gray-600 dark:bg-gray-800 cursor-pointer"
          [ngClass]="{
            'bg-sky-900 dark:bg-sky-900':
              (selectedMoveNotationIndex$ | async) === i &&
              ((moveNotation.playedBy === PlayerOrNone.Host && isHost) ||
                (moveNotation.playedBy === PlayerOrNone.Guest && !isHost)),
            'bg-rose-900 dark:bg-rose-900':
              (selectedMoveNotationIndex$ | async) === i &&
              !(
                (moveNotation.playedBy === PlayerOrNone.Host && isHost) ||
                (moveNotation.playedBy === PlayerOrNone.Guest && !isHost)
              )
          }"
        >
          <div class="ml-4 flex flex-col gap-y-2">
            @for (
              notationGroup of moveNotation.notations;
              track i;
              let i = $index
            ) {
              <div class="flex gap-x-4">
                <div class="flex flex-col justify-start w-8">
                  <span
                    class="material-symbols-outlined px-2 select-none"
                    [ngClass]="{
                      'opacity-0': !moveNotation?.displayIndex
                    }"
                  >
                    person
                  </span>
                </div>

                <div class="w-4">
                  @if (moveNotation?.displayIndex) {
                    {{ moveNotation?.displayIndex }}
                  }
                </div>

                @for (notation of notationGroup; track i; let i = $index) {
                  <div
                    class="mx-2 px-1 bg-gray-500 dark:bg-gray-600 flex justify-around w-16 rounded-sm"
                  >
                    {{ notation }}
                  </div>
                }
              </div>
            }
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="flex flex-col justify-around h-full">
      <div class="flex flex-col gap-y-4">
        <div class="flex justify-around">
          <div class="p-2 rounded-full bg-gray-500 dark:bg-gray-700 transition">
            <span
              class="material-symbols-outlined text-gray-600 dark:text-gray-800 transition"
              style="font-size: 96px"
            >
              replay
            </span>
          </div>
        </div>

        <div class="flex justify-around">
          <div class="text-center max-w-xs">
            <h2 class="text-3xl mb-2">No moves made!</h2>
            <p>Once a player makes a move, they will appear here.</p>
          </div>
        </div>
      </div>
    </div>
  }
</div>

<nav
  class="sticky bottom-0 w-full bg-gray-600 dark:bg-gray-800 transition text-white py-4 px-6"
>
  <div class="container mx-auto">
    <div class="flex-grow mr-4 ml-2">
      <previous-next-selector
        (firstSelected)="selectFirst()"
        (previousSelected)="selectPrevious()"
        (nextSelected)="selectNext()"
        (lastSelected)="selectLast()"
      ></previous-next-selector>
    </div>
  </div>
</nav>
